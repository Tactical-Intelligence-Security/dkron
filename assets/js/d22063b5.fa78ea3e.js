(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6213],{65382:function(e,t,o){"use strict";o.r(t),o.d(t,{assets:function(){return l},contentTitle:function(){return d},default:function(){return m},frontMatter:function(){return i},metadata:function(){return c},toc:function(){return g}});var n=o(87462),a=o(63366),r=(o(67294),o(3905)),s=o(93456),u=["components"],i={title:"Target nodes spec",weight:10},d=void 0,c={unversionedId:"usage/target-nodes-spec",id:"version-v1/usage/target-nodes-spec",title:"Target nodes spec",description:"Target nodes spec",source:"@site/versioned_docs/version-v1/usage/target-nodes-spec.md",sourceDirName:"usage",slug:"/usage/target-nodes-spec",permalink:"/docs/v1/usage/target-nodes-spec",editUrl:"https://github.com/distribworks/dkron/tree/main/website/docs/versioned_docs/version-v1/usage/target-nodes-spec.md",tags:[],version:"v1",frontMatter:{title:"Target nodes spec",weight:10},sidebar:"tutorialSidebar",previous:{title:"Job retries",permalink:"/docs/v1/usage/retries"}},l={},g=[{value:"Target nodes spec",id:"target-nodes-spec",level:2},{value:"Examples:",id:"examples",level:3}],p={toc:g};function m(e){var t=e.components,o=(0,a.Z)(e,u);return(0,r.kt)("wrapper",(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"target-nodes-spec"},"Target nodes spec"),(0,r.kt)("p",null,"You can choose whether a job is run on a node or nodes by specifying tags and a count of target nodes having this tag do you want a job to run."),(0,r.kt)("p",null,"{{% notice note %}}\nThe target node syntax: ",(0,r.kt)("inlineCode",{parentName:"p"},"[tag-value]:[count]"),"\n{{% /notice %}}"),(0,r.kt)("h3",{id:"examples"},"Examples:"),(0,r.kt)("p",null,"Target all nodes with a tag:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "job_name",\n    "command": "/bin/true",\n    "schedule": "@every 2m",\n    "tags": {\n        "role": "web"\n    }\n}\n')),(0,r.kt)(s.Mermaid,{chart:'graph LR;\n    J("Job tags: #quot;role#quot;: #quot;web#quot;") --\x3e|Run Job|N1["Node1 tags: #quot;role#quot;: #quot;web#quot;"]\n    J --\x3e|Run Job|N2["Node2 tags: #quot;role#quot;: #quot;web#quot;"]\n    J --\x3e|Run Job|N3["Node2 tags: #quot;role#quot;: #quot;web#quot;"]',mdxType:"Mermaid"}),(0,r.kt)("p",null,"Target only one nodes of a group of nodes with a tag:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "job_name",\n    "command": "/bin/true",\n    "schedule": "@every 2m",\n    "tags": {\n        "role": "web:1"\n    }\n}\n')),(0,r.kt)(s.Mermaid,{chart:'graph LR;\n    J("Job tags: #quot;role#quot;: #quot;web:1#quot;") --\x3e|Run Job|N1["Node1 tags: #quot;role#quot;: #quot;web#quot;"]\n    J -.- N2["Node2 tags: #quot;role#quot;: #quot;web#quot;"]\n    J -.- N3["Node2 tags: #quot;role#quot;: #quot;web#quot;"]',mdxType:"Mermaid"}),(0,r.kt)("p",null,"Dkron will try to run the job in the amount of nodes indicated by that count having that tag."))}m.isMDXComponent=!0},11748:function(e,t,o){var n={"./locale":89234,"./locale.js":89234};function a(e){var t=r(e);return o(t)}function r(e){if(!o.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=r,e.exports=a,a.id=11748}}]);